ylab("Participant ID") + xlab("Time") +
ggtitle("Recurrent Event and Survival Data")
library(tidyverse)
library(frailtypack)
data(dataMultiv)
tibble(id = c(rep(1,2)),
t0 = c(10, 15),
t1 = c(0, 15),
event = c("coma", "death"))
tibble(id = c(rep(1,2)),
t0 = c(10, 0),
t1 = c(15, 15),
event = c("coma", "death"))
tibble(id = c(rep(1,2)),
t0 = c(10, 0),
t1 = c(15, 15),
event = c("coma", "death")) %>%
ggplot() +
geom_segment(aes(xmin = t0, xmax = t1, ymin = id, ymax = id))
tibble(id = c(rep(1,2)),
t0 = c(10, 0),
t1 = c(15, 15),
event = c("coma", "death")) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1, y = id, yend = id))
tibble(id = c(rep(1,2)),
t0 = c(10, 0),
t1 = c(15, 15),
event = c("coma", "death")) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1, y = id, yend = id, color = event))
tibble(id = c(rep(1,2)),
t0 = c(10, 0),
t1 = c(15, 15),
event = c("coma", "death"),
coma = c(1,0),
death = c(0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1, y = id, yend = id, color = event))
tibble(id = c(rep(1,2)),
t0 = c(10, 0),
t1 = c(15, 15),
event = c("coma", "death"),
coma = c(1,0),
death = c(0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1, y = id+.1*coma, yend = id+.1*coma, color = event))
tibble(id = c(rep(1,2), rep(2,2)),
t0 = c(10, 0, 15, 0),
t1 = c(15, 15, 20, 20),
event = c("coma", "death", "delirium", "death"),
delirium = c(0,0,1,0)
coma = c(1,0, 0, 1),
tibble(id = c(rep(1,2), rep(2,2)),
t0 = c(10, 0, 15, 0),
t1 = c(15, 15, 20, 20),
event = c("coma", "death", "delirium", "death"),
delirium = c(0,0,1,0),
coma = c(1,0, 0, 1),
death = c(0,1, 0, 1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id+.1*coma+.2*delirium, yend = id+.1*coma+.2*delirium, color = event))
tibble(id = c(rep(1,2), rep(2,2)),
t0 = c(10, 0, 15, 0),
t1 = c(15, 15, 20, 20),
event = c("coma", "death", "delirium", "death"),
delirium = c(0,0,1,0),
coma = c(1, 0, 1, 0),
death = c(0, 1, 0, 1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id+.1*coma+.2*delirium,
yend = id+.1*coma+.2*delirium, color = event))
tibble(id = c(rep(1,2), rep(2,2), rep(3,4)),
t0 = c(10, 0, 15, 0, 3, 7, 0),
t1 = c(15, 15, 20, 20, 4, 10, 12),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0,)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id+.1*coma+.2*delirium,
yend = id+.1*coma+.2*delirium,
color = event))+
geom_point(aes(x = t0,
y = id+.1*coma+.2*delirium,
color = event))
tibble(id = c(rep(1,2), rep(2,2), rep(3,4)),
t0 = c(10, 0, 15, 0, 3, 7, 0),
t1 = c(15, 15, 20, 20, 4, 10, 12),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id+.1*coma+.2*delirium,
yend = id+.1*coma+.2*delirium,
color = event))+
geom_point(aes(x = t0,
y = id+.1*coma+.2*delirium,
color = event))
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 0, 15, 0, 3, 7, 0),
t1 = c(15, 15, 20, 20, 4, 10, 12),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id+.1*coma+.2*delirium,
yend = id+.1*coma+.2*delirium,
color = event))+
geom_point(aes(x = t0,
y = id+.1*coma+.2*delirium,
color = event))
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 3, 7, 0),
t1 = c(15, NA, 20, NA, 4, 10, 12),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id+.1*coma+.2*delirium,
yend = id+.1*coma+.2*delirium,
color = event))+
geom_point(aes(x = t0,
y = id+.1*coma+.2*delirium,
color = event))
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 3, 7, 12),
t1 = c(15, NA, 20, NA, 4, 10, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id+.1*coma+.2*delirium,
yend = id+.1*coma+.2*delirium,
color = event))+
geom_point(aes(x = t0,
y = id+.1*coma+.2*delirium,
color = event))
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 3, 7, 12),
t1 = c(15, NA, 20, NA, 4, 10, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event))
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 3, 7, 12),
t1 = c(15, NA, 20, NA, 4, 10, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
theme_classic()
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 3, 7, 12),
t1 = c(15, NA, 20, NA, 4, 10, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
theme_bw()
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 5, 15, 25),
t1 = c(15, NA, 20, NA, 10, 20, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
theme_bw()
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 5, 15, 25),
t1 = c(15, NA, 20, NA, 10, 20, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
geom_text(aes(x = t0, y = id - .1, color = event, label = event))
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 5, 15, 25),
t1 = c(15, NA, 20, NA, 10, 20, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
geom_text(aes(x = t0, y = id - .1, color = event, label = event))+
theme_bw() +
theme(legend.position = "none")
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 5, 15, 25),
t1 = c(15, NA, 20, NA, 10, 20, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
geom_text(aes(x = t0, y = id - .1, color = event, label = event))+
theme_bw() +
theme(legend.position = "none") +
scale_y_continuous(breaks = 1:3)
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 5, 15, 25),
t1 = c(15, NA, 20, NA, 10, 20, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
geom_text(aes(x = t0, y = id - .1, color = event, label = event))+
theme_bw() +
theme(legend.position = "none") +
scale_y_continuous("Patient ID",breaks = 1:3)+
scale_x_continuous("Days since Randomization")
tibble(id = c(rep(1,2), rep(2,2), rep(3,3)),
t0 = c(10, 15, 15, 20, 5, 15, 25),
t1 = c(15, NA, 20, NA, 10, 20, NA),
event = c("coma", "death", "delirium", "death", "coma", "coma", "discharge"),
delirium = c(0,0,1,0,0,0,0),
coma = c(1, 0, 1, 0, 1, 1, 0),
death = c(0, 1, 0, 1, 0, 0, 0),
discharge = c(0,0,0,0,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
geom_text(aes(x = t0, y = id - .1, color = event, label = event))+
theme_bw() +
theme(legend.position = "none") +
scale_y_continuous("Patient ID",breaks = 1:3)+
scale_x_continuous("Days since Randomization", limits = c(0, 25))
tibble(id = c(rep(1,2), rep(2,2), rep(3,3), rep(4, 3)),
t0 = c(10, 15, 15, 20, 5, 15, 25, 0, 10, 20),
t1 = c(15, NA, 20, NA, 10, 20, NA, 5, 15, NA),
event = c("coma", "death", "delirium", "death",
"coma", "coma", "discharge",
"delirium", "delirium", "discharge"),
delirium = c(0,0,1,0,0,0,0,1,1,0),
coma = c(1, 0, 1, 0, 1, 1, 0,0,0,0),
death = c(0, 1, 0, 1, 0, 0, 0,0,0,0),
discharge = c(0,0,0,0,0,0,1,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
geom_text(aes(x = t0, y = id - .1, color = event, label = event))+
theme_bw() +
theme(legend.position = "none") +
scale_y_continuous("Patient ID",breaks = 1:3)+
scale_x_continuous("Days since Randomization", limits = c(0, 25))
tibble(id = c(rep(1,2), rep(2,2), rep(3,3), rep(4, 3)),
t0 = c(0, 0,
0, 0,
0, 10, 20, 0,
0, 5, 15, 0),
t1 = c(10,15,
15, 20,
5, 15, 25, 25,
0, 10, 20, 20),
risk = c("delirium","terminal",
"delirium","terminal",
"delirium", "delirium", "delirium", "terminal",
"delirium", "delirium", "delirium", "terminal"),
delirium = c(0,0,  1,0,  0,0,0,0,  1,1,0,0),
death = c(0,1,     0,1,  0,0,0,0,  0,0,0,0),
discharge = c(0,0,    0,0,  0,0,0,1,  0,0,0,1))
tibble(id = c(rep(1,2), rep(2,2), rep(3,4), rep(4, 4)),
t0 = c(0, 0,
0, 0,
0, 10, 20, 0,
0, 5, 15, 0),
t1 = c(10,15,
15, 20,
5, 15, 25, 25,
0, 10, 20, 20),
risk = c("delirium","terminal",
"delirium","terminal",
"delirium", "delirium", "delirium", "terminal",
"delirium", "delirium", "delirium", "terminal"),
delirium = c(0,0,  1,0,  0,0,0,0,  1,1,0,0),
death = c(0,1,     0,1,  0,0,0,0,  0,0,0,0),
discharge = c(0,0,    0,0,  0,0,0,1,  0,0,0,1))
tibble(id = c(rep(1,2), rep(2,2), rep(3,4), rep(4, 4)),
t0 = c(0, 0,
0, 0,
0, 10, 20, 0,
0, 5, 15, 0),
t1 = c(10,15,
15, 20,
5, 15, 25, 25,
0, 10, 20, 20),
risk = c("delirium","terminal",
"delirium","terminal",
"delirium", "delirium", "delirium", "terminal",
"delirium", "delirium", "delirium", "terminal"),
delirium = c(0,0,  1,0,  0,0,0,0,  1,1,0,0),
death = c(0,1,     0,1,  0,0,0,0,  0,0,0,0),
discharge = c(0,0,    0,0,  0,0,0,1,  0,0,0,1)) %>%
print.data.frame
tibble(id = c(rep(1,2), rep(2,2), rep(3,3), rep(4, 3)),
t0 = c(10, 15, 15, 20, 5, 15, 25, 0, 10, 20),
t1 = c(15, NA, 20, NA, 10, 20, NA, 5, 15, NA),
event = c("coma", "death", "delirium", "death",
"coma", "coma", "discharge",
"delirium", "delirium", "discharge"),
delirium = c(0,0,1,0,0,0,0,1,1,0),
coma = c(1, 0, 1, 0, 1, 1, 0,0,0,0),
death = c(0, 1, 0, 1, 0, 0, 0,0,0,0),
discharge = c(0,0,0,0,0,0,1,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
geom_text(aes(x = t0, y = id - .1, color = event, label = event))+
theme_bw() +
theme(legend.position = "none") +
scale_y_continuous("Patient ID",breaks = 1:4)+
scale_x_continuous("Days since Randomization", limits = c(0, 25))
tibble(id = c(rep(1,3), rep(2,3), rep(3,3), rep(4, 3)),
t0 = c(0, 0, 0,
0, 0, 0,
0,0,10,10,20,20,0,
0, 5, 15, 0),
t1 = c(10, 10, 15,
15, 20, 20,
5,5, 15,15, 25,25, 25,
0, 10, 20, 20),
risk = c("delirium", "coma", "terminal",
"delirium", "coma", "terminal",
"delirium", "coma","delirium", "coma","delirium", "coma", "terminal",
"delirium", "coma", "delirium", "coma", "delirium", "coma", "terminal"),
delirium = c(0,0,0,  1,0,0,  0,0,0,0,0,0,0,  1,0,1,0,0,0,0),
coma = c(0,1,0,  0,1,0,  0,1,0,1,0,1,0,  0,0,0,0,0,0,0),
death = c(0,0,1,     0,0,1,  0,0,0,0,0,0,0,  0,0,0,0,0,0,0),
discharge = c(0,0,0,    0,0,0,  0,0,0,0,0,0,0,  0,0,0,0,0,0,1)) %>%
print.data.frame
tibble(id = c(rep(1,3), rep(2,3), rep(3,7), rep(4, 7)),
t0 = c(0, 0, 0,
0, 0, 0,
0,0,10,10,20,20,0,
0, 5, 15, 0),
t1 = c(10, 10, 15,
15, 20, 20,
5,5, 15,15, 25,25, 25,
0, 10, 20, 20),
risk = c("delirium", "coma", "terminal",
"delirium", "coma", "terminal",
"delirium", "coma","delirium", "coma","delirium", "coma", "terminal",
"delirium", "coma", "delirium", "coma", "delirium", "coma", "terminal"),
delirium = c(0,0,0,  1,0,0,  0,0,0,0,0,0,0,  1,0,1,0,0,0,0),
coma = c(0,1,0,  0,1,0,  0,1,0,1,0,1,0,  0,0,0,0,0,0,0),
death = c(0,0,1,     0,0,1,  0,0,0,0,0,0,0,  0,0,0,0,0,0,0),
discharge = c(0,0,0,    0,0,0,  0,0,0,0,0,0,0,  0,0,0,0,0,0,1)) %>%
print.data.frame
tibble(id = c(rep(1,3), rep(2,3), rep(3,7), rep(4, 7)),
t0 = c(0, 0, 0,
0, 0, 0,
0,0,10,10,20,20,0,
0,  5, 15,0, 0),
t1 = c(10, 10, 15,
15, 20, 20,
5,5, 15,15, 25,25, 25,
0, 10, 20, 20, 20),
risk = c("delirium", "coma", "terminal",
"delirium", "coma", "terminal",
"delirium", "coma","delirium", "coma","delirium", "coma", "terminal",
"delirium", "delirium", "delirium", "coma", "terminal"),
delirium = c(0,0,0,  1,0,0,  0,0,0,0,0,0,0,  1,1,0,0,0),
coma = c(0,1,0,  0,1,0,  0,1,0,1,0,1,0,  0,0,0,0,0),
death = c(0,0,1,     0,0,1,  0,0,0,0,0,0,0,  0,0,0,0,0),
discharge = c(0,0,0,    0,0,0,  0,0,0,0,0,0,0,  0,0,0,0,1)) %>%
print.data.frame
tibble(id = c(rep(1,3), rep(2,3), rep(3,7), rep(4, 5)),
t0 = c(0, 0, 0,
0, 0, 0,
0,0,10,10,20,20,0,
0,  5, 15,0, 0),
t1 = c(10, 10, 15,
15, 20, 20,
5,5, 15,15, 25,25, 25,
0, 10, 20, 20, 20),
risk = c("delirium", "coma", "terminal",
"delirium", "coma", "terminal",
"delirium", "coma","delirium", "coma","delirium", "coma", "terminal",
"delirium", "delirium", "delirium", "coma", "terminal"),
delirium = c(0,0,0,  1,0,0,  0,0,0,0,0,0,0,  1,1,0,0,0),
coma = c(0,1,0,  0,1,0,  0,1,0,1,0,1,0,  0,0,0,0,0),
death = c(0,0,1,     0,0,1,  0,0,0,0,0,0,0,  0,0,0,0,0),
discharge = c(0,0,0,    0,0,0,  0,0,0,0,0,0,0,  0,0,0,0,1)) %>%
print.data.frame
library(tidyverse)
knitr::opts_chunk$set(echo = F)
tibble(id = c(rep(1,2), rep(2,2), rep(3,3), rep(4, 3)),
t0 = c(10, 15, 15, 20, 5, 15, 25, 0, 10, 20),
t1 = c(15, NA, 20, NA, 10, 20, NA, 5, 15, NA),
event = c("coma", "death", "delirium", "death",
"coma", "coma", "discharge",
"delirium", "delirium", "discharge"),
delirium = c(0,0,1,0,0,0,0,1,1,0),
coma = c(1, 0, 1, 0, 1, 1, 0,0,0,0),
death = c(0, 1, 0, 1, 0, 0, 0,0,0,0),
discharge = c(0,0,0,0,0,0,1,0,0,1)) %>%
ggplot() +
geom_segment(aes(x = t0, xend = t1,
y = id,
yend = id,
color = event))+
geom_point(aes(x = t0,
y = id,
color = event)) +
geom_text(aes(x = t0, y = id - .1, color = event, label = event))+
theme_bw() +
theme(legend.position = "none") +
scale_y_continuous("Patient ID",breaks = 1:4)+
scale_x_continuous("Days since Randomization", limits = c(0, 25))
1014/1250
library(delirium)
